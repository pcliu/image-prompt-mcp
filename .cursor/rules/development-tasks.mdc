---
description: 任务进度跟踪：在开启新任务时，需要了解当前的进度；当完成任务后，需要更新任务进度；如果在开发过程中，发现任务不合理，可以调整任务。
globs: 
alwaysApply: false
---
# 开发任务进度管理

## 任务状态说明
- 🔲 未开始
- 🏗️ 进行中
- ✅ 已完成
- 🔄 需要修改
- ⏸️ 已暂停
- ❌ 已取消

## 核心功能实现进度

### 1. 基础框架搭建 [🔲]
- [ ] 设置 MCP Server 基础结构 [src/index.ts](mdc:src/index.ts)
- [ ] 配置 TypeScript 环境
- [ ] 添加必要的依赖项
- [ ] 创建基础目录结构

### 2. 提示词生成功能 [🔲]
- [ ] 创建手动测试模板 [templates/test/basic.json](mdc:templates/test/basic.json)
  - [ ] 定义完整的模板参数
  - [ ] 添加示例值
  - [ ] 准备多个场景的测试数据
- [ ] 实现 generatePrompt [src/tools/prompts.ts](mdc:src/tools/prompts.ts)
  - [ ] 参数验证逻辑
  - [ ] 提示词组装逻辑
  - [ ] 错误处理
- [ ] 编写单元测试
  - [ ] 基本功能测试
  - [ ] 参数覆盖测试
  - [ ] 错误场景测试
- [ ] 手动验证
  - [ ] 使用测试模板生成提示词
  - [ ] 验证生成的提示词质量
  - [ ] 收集优化建议

### 3. 模板管理功能 [🔲]
- [ ] 实现 listTemplates [src/tools/templates.ts](mdc:src/tools/templates.ts)
- [ ] 实现 getTemplate
- [ ] 实现 createTemplate
- [ ] 添加参数验证
- [ ] 编写单元测试

### 4. Sampling 集成 [🔲]
- [ ] 实现 checkSamplingSupport [src/utils/sampling.ts](mdc:src/utils/sampling.ts)
- [ ] 实现 handleSamplingRequest
- [ ] 实现 processSamplingResponse
- [ ] 添加错误处理
- [ ] 编写集成测试

### 5. 图片分析模板生成 [🔲]
- [ ] 实现 withSampling 模式 [src/tools/templates.ts](mdc:src/tools/templates.ts)
- [ ] 实现 withoutSampling 模式
- [ ] 添加客户端能力检测
- [ ] 实现降级处理
- [ ] 编写测试用例

## 优化任务

### P1 - 重要功能 [🔲]
- [ ] 提示词生成优化
  - [ ] 基于验证结果优化生成逻辑
  - [ ] 添加更多模板参数
  - [ ] 实现提示词模板
- [ ] 模板版本控制
  - [ ] 实现版本号管理
  - [ ] 添加版本历史记录
  - [ ] 实现版本回滚功能
- [ ] 默认模板配置
  - [ ] 创建基础模板
  - [ ] 实现模板继承机制
  - [ ] 添加默认值处理

### P2 - 优化功能 [🔲]
- [ ] 模板缓存机制
  - [ ] 实现内存缓存
  - [ ] 添加缓存失效策略
- [ ] 批量操作支持
  - [ ] 实现批量创建
  - [ ] 实现批量更新
- [ ] 性能优化
  - [ ] 优化响应时间
  - [ ] 减少资源占用

## 测试计划

### 单元测试 [🔲]
- [ ] 工具函数测试
- [ ] 参数验证测试
- [ ] 错误处理测试

### 集成测试 [🔲]
- [ ] Sampling 功能测试
- [ ] 完整工作流测试
- [ ] 客户端兼容性测试

### 模板测试 [🔲]
- [ ] 格式验证测试
- [ ] 默认值处理测试
- [ ] 参数覆盖测试

## 发布检查清单

### 1. 代码质量 [🔲]
- [ ] TypeScript 类型检查
- [ ] ESLint 规范检查
- [ ] 代码注释完整性
- [ ] 文档更新

### 2. 测试覆盖 [🔲]
- [ ] 单元测试覆盖率 > 80%
- [ ] 集成测试通过
- [ ] 性能测试达标

### 3. 安全检查 [🔲]
- [ ] 输入验证完整性
- [ ] 错误处理完整性
- [ ] 敏感信息处理
- [ ] 速率限制实现

## 进度更新记录

```typescript
interface ProgressUpdate {
  date: string;
  task: string;
  status: "开始" | "完成" | "暂停" | "继续" | "取消";
  notes: string;
}
```

### 更新历史
- 2024-05-16: 项目启动，完成 PRD 文档
- [在此添加后续更新...]
